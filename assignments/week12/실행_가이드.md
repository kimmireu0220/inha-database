# Week 12 Index 과제 실행 가이드

## 실행 순서

### 1단계: 데이터베이스 준비

```sql
-- week11.sql 실행하여 데이터베이스 및 테이블 생성
SOURCE week11.sql;
```

### 2단계: 10만명 학생 데이터 생성 및 INSERT

**방법 1: SQL 파일 직접 실행**
```sql
USE WEEK11_INHA_DB;
SOURCE sql_scripts/generate_100k_students.sql;
```

**방법 2: Python 스크립트로 재생성**
```bash
cd sql_scripts
python3 generate_students.py > generate_100k_students.sql
```

**실행 시간**: 약 5-30분 (시스템 성능에 따라 다름)

**확인**:
```sql
SELECT COUNT(*) FROM Student;
-- 결과: 100000 이상이어야 함
```

### 3단계: 인덱스 적용 전 조사

**MySQL Workbench에서 실행**:
1. `sql_scripts/step2_investigate_indexes.sql` 파일 열기
2. 전체 실행 (Ctrl+Shift+Enter)
3. 결과 캡처:
   - SHOW INDEX 결과
   - 각 EXPLAIN 결과

**또는 한 번에 실행**:
```sql
SOURCE sql_scripts/complete_analysis.sql;
```

### 4단계: 인덱스 생성

**MySQL Workbench에서 실행**:
1. `sql_scripts/step3_create_indexes.sql` 파일 열기
2. 전체 실행
3. 각 인덱스 생성 메시지 확인

**또는 한 번에 실행**:
```sql
SOURCE sql_scripts/complete_analysis.sql;
```

### 5단계: 인덱스 적용 후 조사

**MySQL Workbench에서 실행**:
1. `sql_scripts/step3_compare_performance.sql` 파일 열기
2. 전체 실행
3. 결과 캡처:
   - SHOW INDEX 결과 (인덱스 적용 후)
   - 각 EXPLAIN 결과 (인덱스 적용 후)

### 6단계: 스크린샷 캡처

**캡처해야 할 화면**:
1. 데이터 INSERT 실행 화면
2. SHOW INDEX (인덱스 적용 전)
3. EXPLAIN 결과들 (인덱스 적용 전) - 5개 이상
4. 인덱스 생성 화면
5. SHOW INDEX (인덱스 적용 후)
6. EXPLAIN 결과들 (인덱스 적용 후) - 5개 이상
7. 성능 비교 요약

**스크린샷 저장 위치**: `screenshots/` 폴더

**파일명 규칙**:
- `01_insert_data.png`
- `02_show_index_before.png`
- `03_explain_before_studentid.png`
- `04_explain_before_sname.png`
- `05_explain_before_semail.png`
- `06_create_indexes.png`
- `07_show_index_after.png`
- `08_explain_after_studentid.png`
- `09_explain_after_sname.png`
- `10_explain_after_semail.png`
- `11_performance_comparison.png`

## 빠른 실행 (권장)

모든 단계를 한 번에 실행하려면:

```sql
-- 1. 데이터베이스 준비
SOURCE week11.sql;

-- 2. 데이터 생성 (시간 소요)
USE WEEK11_INHA_DB;
SOURCE sql_scripts/generate_100k_students.sql;

-- 3. 전체 분석 (인덱스 적용 전 → 인덱스 생성 → 인덱스 적용 후)
SOURCE sql_scripts/complete_analysis.sql;
```

## 문제 해결

### 인덱스가 이미 존재하는 경우
```sql
DROP INDEX idx_sname ON Student;
DROP INDEX idx_semail ON Student;
-- ... (다른 인덱스들도 삭제)
```

### 데이터가 너무 많은 경우
```sql
-- 일부 데이터만 삭제
DELETE FROM Student WHERE StudentId >= 12000000 LIMIT 50000;
```

### 실행 시간이 너무 오래 걸리는 경우
- 인덱스 생성은 시간이 걸릴 수 있음 (정상)
- INSERT는 배치로 나누어 실행 가능


